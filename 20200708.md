##2020.7.8


### 1.个人想法，整理脚本
    
     经昨天重新对大护的费用计算，并与之前脚本计算的值做对比，是一致的。
     
     对patient_account_list修改，对于source_id为4的行，即大护费用，进行加字段order_id,month

### 2.logstash增加字段
        mutate {
                add_field => {
                    "add_from_1" => "1111111"
                }
            }
### 3.logstash将数组字段复制到另一个字段中
        ruby {
                code => "event['another_top_level_field'] = event['top_level_field']"
          }
### 4.logstash的json解析
      json{
             source => "message"
             target => "json"
         }
 ### 5.logstash的移除字段
       mutate {
              remove_field => ["host"]
              remove_field => ["agent"]
              remove_field => ["ecs"]
           }
 ### 5.es的mapping查看与修改
         GET /xxxxxx/_mapping
         
         PUT /xxxxxx/_mapping
         {
           "properties": {
                     "data" : {
                       "type" : "text",
                       "fields" : {
                         "keyword" : {
                           "type" : "keyword",
                           "ignore_above" : 256
                         }
                       }
                     }
             
           }
         }

